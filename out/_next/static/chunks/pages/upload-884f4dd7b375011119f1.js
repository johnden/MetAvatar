(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[863],{40534:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return v}});var r=n(809),a=n.n(r),i=n(92447),s=n(85893),u=n(67294),o=(n(50387),n(77616),n(241),n(85241)),c=n(11163),l=(n(42484),n(24210)),p=n(36470),d=n(90346),f=n(18222),h=n(7085),m=n(49101),x=n(16501),y=n.n(x),g=function(){var e=(0,i.Z)(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=window.ethereum)){e.next=15;break}return 80001,e.prev=3,e.next=6,t.request({method:"wallet_addEthereumChain",params:[{chainId:"0x".concat(80001..toString(16)),chainName:"Fantom Opera Mainnet",nativeCurrency:{name:"Polygon Mumbai Testnet",symbol:"Matic",decimals:18},rpcUrls:["https://rpc-mumbai.matic.today"],blockExplorerUrls:["https://rpc-mumbai.matic.today"]}]});case 6:return e.abrupt("return",!0);case 9:return e.prev=9,e.t0=e.catch(3),console.error("Failed to setup the network in Metamask:",e.t0),e.abrupt("return",!1);case 13:e.next=17;break;case 15:return console.error("Can't setup the Polygon network on metamask because window.ethereum is undefined"),e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(){return e.apply(this,arguments)}}();n(82025),n(33334),n(66127),(0,o.create)("https://ipfs.infura.io:5001/api/v0");function v(){var e=(0,u.useState)(null),t=e[0],n=e[1],r=(0,u.useState)({price:"",name:"",description:""}),o=(r[0],r[1],(0,u.useState)(!1)),x=o[0],v=o[1],w=(0,c.useRouter)(),b=(0,s.jsxs)("div",{children:[x?(0,s.jsx)(h.Z,{}):(0,s.jsx)(m.Z,{}),(0,s.jsx)("div",{style:{marginTop:8},children:"Upload"})]});function k(){return(k=(0,i.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return l.ZP.error("\u8bf7\u5148\u9009\u62e9\u56fe\u7247"),e.abrupt("return");case 3:return e.next=5,g();case 5:e.sent,w.push({pathname:"/gen-avatar",query:{url:t}});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,u.useEffect)((function(){y().setApiKey("e3dcddd2-bf7a-4e34-810f-c7b49151803f")}),[]),(0,s.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[(0,s.jsx)("p",{style:{fontSize:"30px"},children:"\u751f\u6210\u4f60\u7684\u5361\u901a\u5934\u50cfNFT"}),(0,s.jsx)("p",{children:"\u7acb\u523b\u62e5\u6709\u5168\u4e16\u754c\u72ec\u4e00\u65e0\u4e8c\uff0c\u53ea\u5c5e\u4e8e\u4f60\u7684\u5934\u50cfNFT"}),(0,s.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center"},children:[(0,s.jsx)(p.Z,{name:"avatar",listType:"picture-card",style:{width:"400px",height:"400px"},showUploadList:!1,beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type;t||l.ZP.error("You can only upload JPG/PNG file!");var r=e.size/1024/1024<2;r||l.ZP.error("Image must smaller than 2MB!"),console.log(e);try{(0,i.Z)(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y().callStandardApi("toonify",{image:document.getElementById("trig")});case 2:t=e.sent,console.log(t),n(t.output_url);case 5:case"end":return e.stop()}}),e)})))()}catch(s){console.log("Error uploading file: ",s)}return t&&r},onChange:function(e){"uploading"!==e.file.status?"done"===e.file.status&&v(!1):v(!0)},id:"trig",children:t?(0,s.jsx)(d.Z,{src:t,alt:"avatar"}):b}),(0,s.jsx)(f.Z,{type:"primary",shape:"round",onClick:function(){return k.apply(this,arguments)},children:"\u4e0a\u4f20\u5934\u50cf"})]})]})}},87257:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/upload",function(){return n(40534)}])},47005:function(){},26937:function(){},26784:function(){},88795:function(){}},function(e){e.O(0,[753,669,977,489,182,855,774,888,179],(function(){return t=87257,e(e.s=t);var t}));var t=e.O();_N_E=t}]);